{"version":3,"file":"ngx-file-droppa.js","sources":["../../../projects/ngx-file-droppa/src/lib/Services/FileWrapper.service.ts","../../../projects/ngx-file-droppa/src/lib/Services/FileStore.service.ts","../../../projects/ngx-file-droppa/src/lib/Services/FileUpload.service.ts","../../../projects/ngx-file-droppa/src/lib/Services/FileParser.service.ts","../../../projects/ngx-file-droppa/src/lib/Directives/FileDropZone.ts","../../../projects/ngx-file-droppa/src/lib/Pipes/GetSize.pipe.ts","../../../projects/ngx-file-droppa/src/lib/Directives/File.ts","../../../projects/ngx-file-droppa/src/lib/Directives/FileList.ts","../../../projects/ngx-file-droppa/src/lib/Directives/FileDroppa.ts","../../../projects/ngx-file-droppa/src/lib/ngx-file-droppa.module.ts","../../../projects/ngx-file-droppa/src/public-api.ts","../../../projects/ngx-file-droppa/src/ngx-file-droppa.ts"],"sourcesContent":["import {EventEmitter} from \"@angular/core\";\nimport {FileUpload} from \"./FileUpload.service\";\n\nexport interface iFile {\n    File:File,\n    removing:boolean,\n    loading:boolean,\n    percentage:number,\n    id:string,\n    loadingSuccessful:boolean,\n    fileUploaded:any,\n    responseMessage:string,\n    uploader:FileUpload\n}\n\nexport class FileWrapper {\n    public File;\n    public loading = false;\n    public percentage = 0;\n    public removing = false;\n    public responseMessage = \"Error happened during upload\";\n    public id = Math.random().toString(36).substr(2);\n    public loadingSuccessful = true;\n    public uploader = null;\n\n    constructor(file){\n        this.File = file;\n    }\n}","import {Injectable, EventEmitter} from \"@angular/core\";\nimport {FileUpload} from \"./FileUpload.service\";\nimport {iFile} from \"./FileWrapper.service\";\nimport {FileWrapper} from \"./FileWrapper.service\";\n\n@Injectable()\nexport class FilesStore {\n    public filesUpdated = new EventEmitter(true);\n    public startAutoUploading = null;\n    public beforeAddFile:any = null;\n\n    private WSfiles:WeakSet<File> = new WeakSet();\n    private _iFiles:Array<iFile> = [];\n\n    public get files():Array<File> {\n        return this.iFiles.reduce((res, iFile:iFile)=> {\n            res.push(iFile.File);\n            return res;\n        }, []);\n    }\n\n    public get iFiles() {\n        return this._iFiles;\n    }\n\n    public set iFiles(files) {\n        this._iFiles = files;\n    }\n\n    public addFiles(files):void {\n        files = files.filter((file)=> {\n            if (!this.WSfiles.has(file)) {\n                if(typeof this.beforeAddFile === \"function\" && this.beforeAddFile(file)){\n                    this.WSfiles.add(file);\n                    return true;\n                } else if(typeof this.beforeAddFile !== \"function\") {\n                    return true;\n                }\n                return false;\n            }\n        }).map((file)=> {\n            let iFile = new FileWrapper(file);\n            this.startAutoUploading && this.startAutoUploading(iFile);\n            return iFile;\n        });\n        this.iFiles = [...this.iFiles, ...files];\n        this.filesUpdated.emit(true);\n    }\n\n    public removeFiles(iFile:iFile):void {\n        this.WSfiles.delete(iFile.File);\n        this.iFiles = this.iFiles.filter((item)=>{\n            return item.id !== iFile.id;\n        });\n        this.filesUpdated.emit(true);\n    }\n\n    public clearStore():void {\n        this.iFiles.forEach((iFile)=> {\n            this.WSfiles.delete(iFile.File);\n        });\n        this.iFiles = [];\n        this.filesUpdated.emit(true);\n    }\n}","import {Injectable, EventEmitter, Output, Input, NgZone} from \"@angular/core\";\n\n@Injectable()\nexport class FileUpload {\n    private zone = new NgZone({enableLongStackTrace: false});\n    public url = null;\n    public beforeRequest = null;\n    public beforeFileUpload = null;\n    public fileUploadedEvent = new EventEmitter(true);\n\n    uploadFiles(iFiles){\n        return Promise.all(iFiles.reduce((res, iFile) => {\n            return res.push(this.uploadFile(iFile)), res;\n        }, []))\n    }\n\n    uploadFile(iFile) {\n        if (!this.url) {\n            throw \"url to upload needs to be provided\";\n        }\n        if (iFile.loading) {\n            throw \"Already under loading\";\n        }\n        let that = this,\n            formData = new FormData();\n\n\n        const xhr = new XMLHttpRequest();\n\n        xhr.upload.onprogress = (event) => {\n            let progress = (event.loaded * 100) / event.total | 0;\n            this.zone.run(()=> {\n                iFile.percentage = progress;\n            })\n        };\n\n        const pr = new Promise((resolve, reject)=> {\n            xhr.onload = xhr.onerror = function (e) {\n                that.zone.run(()=> {\n                    if (this[\"status\"] == 200) {\n                        iFile.loading = false;\n                        iFile.loadingSuccessful = true;\n                        resolve(true);\n                    } else {\n                        iFile.loading = false;\n                        iFile.loadingSuccessful = false;\n                        reject(false);\n                    }\n                })\n            };\n        }).then((success)=>{\n            this.fileUploadedEvent.emit([success, xhr.response, iFile]);\n        }, (reason)=>{\n            this.fileUploadedEvent.emit([reason, xhr.response, iFile]);\n        });\n\n        iFile.loading = true;\n\n        xhr.open(\"POST\", this.url, true);\n\n        //Hook before request to provide user ability to add headers or something else in XHR\n        typeof this.beforeRequest === \"function\" && this.beforeRequest(xhr);\n\n        formData.append(`${iFile.File.name}`, iFile.File);\n\n        if(typeof this.beforeFileUpload === \"function\"){\n            Promise.resolve(this.beforeFileUpload(formData)).then((formData)=> {\n                formData && xhr.send(formData);\n                formData || console.warn(`beforeFileUpload didn't return formData for ${iFile.File.name} and upload was aborted`);\n            });\n        } else {\n            xhr.send(formData);\n        }\n\n        return pr;\n    }\n\n\n}     \n","import {Injectable} from \"@angular/core\";\n@Injectable()\nexport class FileParser {\n    processFilesFromInput(items) {\n        let newFiles = Object.keys(items).reduce((result, key)=> {\n            let entry,\n                item = items[key];\n\n            if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n                if (entry.isFile) {\n                    result.push(Promise.resolve(item.getAsFile()));\n                } else if (entry.isDirectory) {\n                    result.push(this.processDirectory(entry));\n                }\n            } else if (item.getAsFile != null) {\n                if ((item.kind == null) || item.kind === \"file\") {\n                    result.push(Promise.resolve(item.getAsFile()));\n                }\n            } else if (item.isFile) {\n                let pr = new Promise((resolve, reject)=> {\n                    item.file(resolve, reject);\n                });\n                result.push(pr);\n            } else if (item.isDirectory) {\n                result.push(this.processDirectory(item));\n            }\n            return result;\n        }, []);\n\n        return Promise.all(newFiles).then(this.flattenArrayOfFiles)\n    }\n\n    processDirectory(directory) {\n        let dirReader = directory.createReader(),\n            result = [];\n\n        var readEntries = () => {\n            return new Promise((resolve, reject)=> {\n                dirReader.readEntries((entries) => {\n                    let pr = [];\n\n                    if (entries.length) {\n                        for (var i = 0; i < entries.length; i++) {\n                            pr.push(this.processFilesFromInput({0: entries[i]}));\n                        }\n                    } else {\n                        resolve(null);\n                    }\n                    result.push(readEntries());\n                    Promise.all(pr).then(this.flattenArrayOfFiles).then(resolve);\n                }, (error)=> {\n                    reject(\"Error while reading folder\");\n                });\n            })\n        };\n\n        result.push(readEntries());\n        return Promise.all(result).then(this.flattenArrayOfFiles);\n    }\n\n    processInputFromDrop(e) {\n        let items = e.dataTransfer.items;\n\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n            return Promise.resolve(this.processFilesFromInput(items));\n        } else if (items && items.length && !items[0].webkitGetAsEntry) {\n            return Promise.resolve(items)\n        } else if(e.dataTransfer.files){\n            let files = [];\n            for(let i = 0, l = e.dataTransfer.files.length;i<l;i++){\n                files.push(e.dataTransfer.files[i]);\n            }\n            return Promise.resolve(files);\n        }\n    }\n\n    flattenArrayOfFiles(arrayOfPromises) {\n        return Promise.resolve(arrayOfPromises.reduce((result, file) => {\n            if (file) {\n                return [...result, ...[file]];\n            }\n        }, []));\n    }\n}\n","import {Component, ElementRef, Input, EventEmitter, Output, ViewEncapsulation} from '@angular/core';\nimport {FileParser} from \"../Services/FileParser.service\";\nimport {FilesStore} from \"../Services/FileStore.service\";\n\n@Component({\n    selector: 'fileDropZone, [fileDropZone]',\n    providers: [FileParser],\n    styles: [`\n        .file_dropZone_internal {\n            border: 3px dashed #DDD;\n            border-radius:10px;\n            padding:10px;\n            width:400px;\n            height:200px;\n            color:#CCC;\n            text-align:center;\n            display:table-cell;\n            vertical-align:middle;\n            cursor:pointer;\n        }\n    `],\n    template: `\n        <ng-content></ng-content>\n    `,\n    host: {\n        '(drop)': 'drop($event)',\n        '(dragenter)': 'dragenter($event)',\n        '(dragover)': 'dragover($event)',\n        '(dragleave)': 'dragleave($event)',\n        '(click)': 'onClick($event)'\n    },\n    encapsulation: ViewEncapsulation.None\n})\nexport class FileDropZone {\n    private hiddenFileInput = null;\n    public promise = null;\n\n    constructor(private filesStore: FilesStore, private el:ElementRef, private fileParser:FileParser) {\n        this.createHiddenInput();\n    }\n\n    @Input()\n    set multiple(value: boolean) {\n      const attributeName = 'multiple';\n      if (value) {\n        this.hiddenFileInput.setAttribute(attributeName, attributeName);\n      } else {\n        this.hiddenFileInput.removeAttribute(attributeName)\n      }\n    }\n\n    /*\n     * Host Event Listeners\n     * */\n\n    onClick(e) {\n        this.hiddenFileInput && this.hiddenFileInput.click();\n    }\n\n    drop(e) {\n        e.preventDefault();\n        if (!e.dataTransfer || !e.dataTransfer.files.length) {\n            return;\n        }\n        this.promise = this.fileParser.processInputFromDrop(e)\n            .then((files)=> {\n                this.updateFilesStore([...files]);\n            });\n        this.updateStyles();\n    }\n\n    dragenter(e) {\n        e.preventDefault()\n    }\n\n    dragover(e) {\n        e.preventDefault();\n        this.updateStyles(true);\n    }\n\n    dragleave(e) {\n        e.preventDefault();\n        this.updateStyles();\n    }\n\n    /*\n     * Public methods\n     * */\n\n    OnDestroy() {\n        this.hiddenFileInput && document.body.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n    }\n\n    updateStyles(dragOver:boolean = false) {\n        //this.el.nativeElement.classList[(dragOver) ? 'add' : 'remove'](this._overCls);\n    }\n\n    updateFilesStore(files:Array<File>):void {\n        this.filesStore.addFiles(files);\n    }\n\n    createHiddenInput() {\n        this.hiddenFileInput && document.body.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = document.createElement(\"input\");\n        this.hiddenFileInput.setAttribute(\"type\", \"file\");\n        this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n        this.hiddenFileInput.style.visibility = \"hidden\";\n        this.hiddenFileInput.style.position = \"absolute\";\n        this.hiddenFileInput.style.top = \"0\";\n        this.hiddenFileInput.style.left = \"0\";\n        this.hiddenFileInput.style.height = \"0\";\n        this.hiddenFileInput.style.width = \"0\";\n        this.hiddenFileInput.className = \"_hiddenInputClassName\";\n        document.body.appendChild(this.hiddenFileInput);\n        this.hiddenFileInput.addEventListener(\"change\", (e)=> {\n            let files = [];\n            for(let i = 0, l = e.target.files.length;i<l;i++){\n                files.push(e.target.files[i]);\n            }\n            this.hiddenFileInput.value = \"\";\n            this.updateFilesStore(files);\n        });\n    }\n\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n/*\n * Converts bytes to MB, GB and so on \n * Takes an bytes value argument that defaults to 0.\n * Usage:\n *   value | getSize\n * Example:\n *   {{ 1024 |  getSize}}\n *   formats to: 1 MB\n */\n@Pipe({name: 'getSize'})\nexport class GetSizePipe implements PipeTransform {\n    transform(value:number):string {\n        let bytes = value || 0,\n            sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n            k = 1000,\n            i = Math.floor(Math.log(bytes) / Math.log(k));\n\n        if (bytes === 0) {\n            return '0 Byte';\n        }\n\n        return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n    }\n}","import {\n    Component, Input, Output, EventEmitter\n} from '@angular/core';\nimport {NgStyle} from '@angular/common';\nimport {GetSizePipe} from '../Pipes/GetSize.pipe';\n\n@Component({\n    selector: 'fileItem',\n    styles: [`\n        .file-container {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            width: 75px;\n            margin: 20px 10px 0 0;\n            transition: opacity 0.5s, margin 0.5s linear;\n            flex-direction: column;\n            position:relative;\n        }\n\n        .file-container.uploaded {\n            opacity: 0;\n            margin: 0;\n            height: 0;\n            overflow: hidden;\n        }\n\n        .flex-block {\n            width: 90%;\n            text-align: center;\n            font-size: 0.8em;\n            margin: 2px 0;\n        }\n\n        .file-remove {\n            cursor: pointer;\n            position: absolute;\n            left: 87%;\n            top: 8px;\n        }\n        .file-upload-error {\n            position: absolute;\n            top: 8px;\n            left:-8px;\n        }\n        .file-name {\n            text-overflow: ellipsis;\n            overflow: hidden;\n        }\n\n        .file-preview {\n            background: #ccc;\n            border-radius: 2px;\n            width: inherit;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            background-size: cover;\n            color: #fff;\n        }\n\n         .file-preview-ext {\n            text-transform: uppercase;\n        }\n\n        .file-progress {\n            width: 80%;\n            display: block;\n        }\n\n\n        button {\n            margin: 0;\n        }\n\nspan {\n    position:relative;\n    z-index:1;\n    overflow:hidden;\n    list-style:none;\n    padding:0;\n    margin:0 0 0.25em;\n}\n\nspan a:link {\n    display:block;\n    border:0;\n    padding-left:28px;\n    color:#c55500;\n}\n\nspan a:hover,\nspan a:focus {\n    color:#730800;\n    background:transparent;\n}\n\nspan:before,\nspan:after,\nspan a:before,\nspan a:after {\n    content:\"\";\n    position:absolute;\n    top:50%;\n    left:0;\n}\n\nspan a:before,\nspan a:after {\n    margin:-8px 0 0;\n    background:#c55500;\n}\n\nspan a:hover:before,\nspan a:focus:before {\n    background:#730800;\n}\n\n\n.remove a:before {\n    width:16px;\n    height:16px;\n    /* css3 */\n    -webkit-border-radius:16px;\n    -moz-border-radius:16px;\n    border-radius:16px;\n}\n\n.remove a:after {\n    left:3px;\n    width:10px;\n    height:2px;\n    margin-top:-1px;\n    background:#fff;\n}\n.warning:before {\n    content:\"!\";\n    z-index:2;\n    left:8px;\n    margin-top:-8px;\n    font-size:14px;\n    font-weight:bold;\n    color:#000;\n}\n\n.warning:after {\n    z-index:1;\n    border-width:0 11px 18px;\n    border-style:solid;\n    border-color:#F8D201 transparent;\n    margin-top:-10px;\n    background:transparent;\n}\n\n.file-upload-error .tooltiptext {\n    visibility: hidden;\n    white-space:nowrap;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    padding: 5px;\n    border-radius: 6px;\n\n    /* Position the tooltip text - see examples below! */\n    position: absolute;\n    z-index: 1;\n}\n\n.file-upload-error:hover .tooltiptext {\n    visibility: visible;\n}\n\n    `],\n    template: `\n        <div *ngIf=\"file\" class=\"file-container\">\n            <div class=\"flex-block file-preview\" [ngStyle]=\"{'background-image': 'url(' + previewSrc + ')', 'height': previewHeight + 'px'}\">\n                <div *ngIf=\"ext\" class=\"flex-block file-preview-ext \">{{ext}}</div>\n                <div *ngIf=\"!previewSrc\" class=\"flex-block file-name\">{{fileName}}</div>\n                <progress [value]=\"percentage\" max=\"100\" class=\"file-progress\"></progress>\n            </div>\n            <div class=\"file-remove\">\n                <span class=\"remove\"><a href=\"#\" (click)=\"removeFileListener($event)\"></a></span>\n            </div>\n            <div *ngIf=\"!loadingSuccessful\" class=\"file-upload-error\">\n                <span class=\"warning\"></span>\n                <span *ngIf=\"responseMessage\" class=\"tooltiptext\">{{responseMessage}}</span>\n            </div>\n            <div class=\"flex-block\">{{file.size | getSize }}</div>\n        </div>\n    `\n})\n\nexport class File {\n    public ext:string = '';\n    public previewSrc:string = '';\n    public fileName:string = '';\n    //TODO: workaround - depends on strict values;\n    public previewHeight:number = 75;\n\n\n    //ngHooks\n    ngAfterContentInit() {\n        this.file && this.getFileType();\n    }\n\n    @Input() file;\n    @Input() index;\n    @Input() percentage;\n    @Input() loadingSuccessful;\n    @Input() responseMessage;\n\n    @Output() removeFile = new EventEmitter(true);\n\n\n    removeFileListener(e) {\n        e.preventDefault();\n        this.removeFile && this.removeFile.emit(true);\n    }\n\n    getFileType() {\n        let imageType = /^image\\//,\n            reader;\n\n        if (!imageType.test(this.file.type)) {\n            let ext = this.file.name.split('.').pop();\n\n            this.fileName = this.file.name;\n            this.ext = ext.length > 3\n                ? 'file'\n                : `.${ext}`;\n            return;\n        }\n\n        reader = new FileReader();\n\n        reader.addEventListener(\"load\", () => {\n            let img = new Image,\n                result = reader.result;\n\n            img.onload = () => {\n                let ratio = img.height / img.width,\n                    scaledHeight = ratio * this.previewHeight;\n\n                this.previewSrc = result;\n                this.previewHeight = (scaledHeight < this.previewHeight)\n                    ? this.previewHeight\n                    : scaledHeight;\n            };\n\n            img.src = result;\n        }, false);\n\n        if (this.file) {\n            reader.readAsDataURL(this.file);\n        }\n    }\n}\n","import {Component, Input, EventEmitter, Output, ChangeDetectionStrategy} from '@angular/core';\nimport {File} from './File';\nimport {FilesStore} from \"../Services/FileStore.service\";\nimport {FileUpload} from \"../Services/FileUpload.service\";\nimport {iFile} from \"../Services/FileWrapper.service\";\n\n@Component({\n    selector: 'fileList, [fileList]',\n    styles: [`\n        .file-list {\n            width: 430px;\n            margin-bottom: 5px;\n            display: flex;\n            flex-flow: wrap;\n            justify-content: flex-start;\n         }\n    `],\n    template: `\n        <div class=\"file-list\">\n            <fileItem *ngFor=\"let file of filesStore.iFiles\"\n                [file]=\"file.File\"\n                [percentage]=\"file.percentage\"\n                [loadingSuccessful]=\"file.loadingSuccessful\"\n                [responseMessage]=\"file.responseMessage\"\n                (removeFile)=\"removeFile(file)\">\n            </fileItem>\n        </div>\n    `\n})\n\nexport class FileList {\n    constructor(public filesStore:FilesStore){\n    }\n\n    removeFile(iFile:iFile) {\n        this.filesStore.removeFiles(iFile);\n    }\n}\n","import {Component, Input, EventEmitter, Output, ViewEncapsulation} from '@angular/core';\nimport {FileDropZone} from './FileDropZone';\nimport {FileList} from './FileList';\nimport {FilesStore} from \"../Services/FileStore.service\";\nimport {File} from \"./File\";\nimport {FileUpload} from \"../Services/FileUpload.service\";\n\n@Component({\n    selector: 'fileDroppa',\n    providers:[FilesStore, FileUpload],\n    encapsulation: ViewEncapsulation.None,\n    styles:[`\n        .file-droppa-container {\n            width: 400px;\n        }\n        .file-droppa-btns {\n         display: flex;\n          align-items: center;\n          justify-content: center;\n\n        }\n        .file-droppa-btn {\n              margin: 15px;\n              padding: 0;\n\n              overflow: hidden;\n\n              border-width: 0;\n              outline: none;\n              border-radius: 2px;\n              box-shadow: 0 1px 4px rgba(0, 0, 0, .6);\n\n              background-color: #2ecc71;\n              color: #ecf0f1;\n\n              transition: background-color .3s;\n              width: 140px;\n              text-align: center;\n              font-size: 12px;\n\n        }\n\n        .file-droppa-btn:hover{\n          background-color: #27ae60;\n        }\n\n        .file-droppa-btn span {\n          display: block;\n          padding: 12px 24px;\n        }\n\n        .file-droppa-btn.orange {\n          background-color: #e67e22;\n        }\n\n        .file-droppa-btn.orange:hover {\n          background-color: #d35400;\n        }\n\n        .file-droppa-btn.red {\n          background-color: #e74c3c;\n        }\n\n        .file-droppa-btn.red:hover{\n          background-color: #c0392b;\n        }\n        `\n    ],\n    template: `\n        <div class=\"file-droppa-container\">\n            <fileDropZone [multiple]=\"multiple\">\n                <div [innerHTML]=\"dropZoneTemplate\"></div>\n            </fileDropZone>\n            <br/>\n            <ng-content></ng-content>\n            <fileList *ngIf=\"showFilesList\"></fileList>\n            <div class=\"file-droppa-btns\" *ngIf=\"filesStore.iFiles.length\">\n              <div #uploadButtonArea (click)=\"uploadAllFiles()\">\n                <ng-content select=\"[upload-button]\"></ng-content>\n              </div>\n              <div *ngIf=\"uploadButtonArea.children.length === 0\" (click)=\"uploadAllFiles();\"\n                   [innerHTML]=\"uploadButtonTemplate\"></div>\n              <div #removeButtonArea (click)=\"removeAllFiles();\">\n                <ng-content select=\"[remove-button]\"></ng-content>\n              </div>\n              <div *ngIf=\"removeButtonArea.children.length === 0\" (click)=\"removeAllFiles();\"\n                   [innerHTML]=\"removeButtonTemplate\"></div>\n            </div>\n        </div>\n    `\n})\nexport class FileDroppa {\n    @Input() showFilesList:boolean = true;\n    @Input() autoUpload:boolean = false;\n    @Input() beforeRequest:Function = null;\n    @Input() set url(tmpUrl: string) {\n      this.fileUploadService.url = tmpUrl;\n    }\n    @Input() beforeFileUpload:Function = null;\n    @Input() beforeAddFile:Function = null;\n    @Input() dropZoneTemplate:string = `\n      <div class=\"file_dropZone_internal\">\n          Drop Files Here\n      </div>\n    `;\n    @Output() filesUpdated = new EventEmitter(true);\n    @Output() fileUploaded = new EventEmitter(true);\n    @Input() uploadButtonTemplate:string = `\n      <div class=\"file-droppa-btn orange\">\n        <span>Upload All Files</span>\n       </div>\n    `;\n    @Input() removeButtonTemplate:string = `\n      <div class=\"file-droppa-btn red\">\n        <span>Remove All Files</span>\n       </div>\n    `;\n    @Input() multiple:boolean = true;\n\n    constructor(public filesStore:FilesStore, private fileUploadService: FileUpload){\n        filesStore.filesUpdated.subscribe(()=>{\n            this.filesUpdated.emit(filesStore.files);\n        });\n        fileUploadService.fileUploadedEvent.subscribe(([success, response, iFile])=>{\n            if(success){\n                this.filesStore.removeFiles(iFile);\n            } else {\n                iFile.loadingSuccessful = false;\n                iFile.responseText = false;\n            }\n            this.fileUploaded.emit([success, response, iFile.file]);\n        });\n        filesStore.startAutoUploading = this.startAutoUploading.bind(this);\n    }\n\n    private startAutoUploading(iFile){\n        this.autoUpload && this.fileUploadService.uploadFile(iFile);\n    }\n\n    /**\n     * We got to pass Input parameters to Service instances\n     */\n    ngOnInit(){\n        this.filesStore.beforeAddFile = (typeof this.beforeAddFile===\"function\") ? this.beforeAddFile : (file) => true;\n        this.fileUploadService.beforeRequest = this.beforeRequest;\n        this.fileUploadService.beforeFileUpload = (typeof this.beforeFileUpload===\"function\") ? this.beforeFileUpload : (formData) => true;\n    }\n\n    removeAllFiles() {\n        this.filesStore.clearStore();\n    }\n\n    uploadAllFiles() {\n        this.fileUploadService.uploadFiles(this.filesStore.iFiles);\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {NgModule} from \"@angular/core\";\nimport { FileDroppa as FileDroppaComponent } from \"./Directives/FileDroppa\";\nimport {File} from \"./Directives/File\";\nimport {FileDropZone} from \"./Directives/FileDropZone\";\nimport {FileList} from \"./Directives/FileList\";\nimport {GetSizePipe} from \"./Pipes/GetSize.pipe\";\n\n@NgModule({\n    imports: [\n      CommonModule,\n    ],\n    declarations: [\n      GetSizePipe,\n      FileDroppaComponent,\n      File,\n      FileDropZone,\n      FileList\n    ],\n    exports: [\n      FileDroppaComponent,\n      File,\n      FileDropZone,\n      FileList\n    ],\n})\nexport class NgxFileDroppaModule {\n\n}\n","/*\n * Public API Surface of ngx-file-droppa\n */\n\n export * from './lib/ngx-file-droppa.module';\n export * from './lib/Directives/File';\n export * from './lib/Directives/FileDroppa';\n export * from './lib/Directives/FileDropZone';\n export * from './lib/Directives/FileList';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵprojection","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵelement","i0.ɵɵtemplate","i0.ɵɵproperty","i0.ɵɵlistener","FileDroppaComponent"],"mappings":"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"}