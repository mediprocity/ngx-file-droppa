{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://ngx-file-droppa/lib/Services/FileWrapper.service.ts","ng://ngx-file-droppa/lib/Services/FileStore.service.ts","ng://ngx-file-droppa/lib/Services/FileUpload.service.ts","ng://ngx-file-droppa/lib/Directives/FileDroppa.ts","ng://ngx-file-droppa/lib/Directives/File.ts","ng://ngx-file-droppa/lib/Services/FileParser.service.ts","ng://ngx-file-droppa/lib/Directives/FileDropZone.ts","ng://ngx-file-droppa/lib/Directives/FileList.ts","ng://ngx-file-droppa/lib/Pipes/GetSize.pipe.ts","ng://ngx-file-droppa/lib/ngx-file-droppa.module.ts"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__read","o","n","m","Symbol","iterator","e","call","ar","next","done","push","value","error","__spread","concat","FileWrapper","file","this","loading","percentage","removing","responseMessage","id","Math","random","toString","substr","loadingSuccessful","uploader","File","FilesStore","filesUpdated","EventEmitter","startAutoUploading","beforeAddFile","WSfiles","WeakSet","_iFiles","prototype","iFiles","reduce","res","iFile","files","addFiles","_this","filter","has","add","map","emit","removeFiles","delete","item","clearStore","forEach","Injectable","FileUpload","zone","NgZone","enableLongStackTrace","url","beforeRequest","beforeFileUpload","fileUploadedEvent","uploadFiles","Promise","all","uploadFile","that","formData","FormData","xhr","XMLHttpRequest","upload","onprogress","event","progress","loaded","total","run","pr","resolve","reject","onload","onerror","then","success","response","reason","open","append","name","send","console","warn","FileDroppa","filesStore","fileUploadService","showFilesList","autoUpload","dropZoneTemplate","fileUploaded","uploadButtonTemplate","removeButtonTemplate","multiple","subscribe","_a","_b","responseText","bind","tmpUrl","ngOnInit","removeAllFiles","uploadAllFiles","Input","Output","Component","selector","providers","encapsulation","ViewEncapsulation","None","template","ext","previewSrc","fileName","previewHeight","removeFile","ngAfterContentInit","getFileType","removeFileListener","preventDefault","reader","test","type","split","pop","FileReader","addEventListener","img","Image","result","scaledHeight","height","width","src","readAsDataURL","FileParser","processFilesFromInput","items","newFiles","keys","entry","webkitGetAsEntry","isFile","getAsFile","isDirectory","processDirectory","kind","flattenArrayOfFiles","directory","dirReader","createReader","readEntries","entries","0","processInputFromDrop","dataTransfer","l","arrayOfPromises","FileDropZone","el","fileParser","hiddenFileInput","promise","createHiddenInput","setAttribute","removeAttribute","onClick","click","drop","updateFilesStore","updateStyles","dragenter","dragover","dragleave","OnDestroy","document","body","removeChild","dragOver","createElement","style","visibility","position","top","left","className","appendChild","ElementRef","host","(drop)","(dragenter)","(dragover)","(dragleave)","(click)","FileList","GetSizePipe","transform","bytes","floor","log","pow","toPrecision","Pipe","NgxFileDroppaModule","NgModule","imports","CommonModule","declarations","FileDroppaComponent","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {EventEmitter} from \"@angular/core\";\nimport {FileUpload} from \"./FileUpload.service\";\n\nexport interface iFile {\n    File:File,\n    removing:boolean,\n    loading:boolean,\n    percentage:number,\n    id:string,\n    loadingSuccessful:boolean,\n    fileUploaded:any,\n    responseMessage:string,\n    uploader:FileUpload\n}\n\nexport class FileWrapper {\n    public File;\n    public loading = false;\n    public percentage = 0;\n    public removing = false;\n    public responseMessage = \"Error happened during upload\";\n    public id = Math.random().toString(36).substr(2);\n    public loadingSuccessful = true;\n    public uploader = null;\n\n    constructor(file){\n        this.File = file;\n    }\n}","import {Injectable, EventEmitter} from \"@angular/core\";\nimport {FileUpload} from \"./FileUpload.service\";\nimport {iFile} from \"./FileWrapper.service\";\nimport {FileWrapper} from \"./FileWrapper.service\";\n\n@Injectable()\nexport class FilesStore {\n    public filesUpdated = new EventEmitter(true);\n    public startAutoUploading = null;\n    public beforeAddFile:any = null;\n\n    private WSfiles:WeakSet<File> = new WeakSet();\n    private _iFiles:Array<iFile> = [];\n\n    public get files():Array<File> {\n        return this.iFiles.reduce((res, iFile:iFile)=> {\n            res.push(iFile.File);\n            return res;\n        }, []);\n    }\n\n    public get iFiles() {\n        return this._iFiles;\n    }\n\n    public set iFiles(files) {\n        this._iFiles = files;\n    }\n\n    public addFiles(files):void {\n        files = files.filter((file)=> {\n            if (!this.WSfiles.has(file)) {\n                if(typeof this.beforeAddFile === \"function\" && this.beforeAddFile(file)){\n                    this.WSfiles.add(file);\n                    return true;\n                } else if(typeof this.beforeAddFile !== \"function\") {\n                    return true;\n                }\n                return false;\n            }\n        }).map((file)=> {\n            let iFile = new FileWrapper(file);\n            this.startAutoUploading && this.startAutoUploading(iFile);\n            return iFile;\n        });\n        this.iFiles = [...this.iFiles, ...files];\n        this.filesUpdated.emit(true);\n    }\n\n    public removeFiles(iFile:iFile):void {\n        this.WSfiles.delete(iFile.File);\n        this.iFiles = this.iFiles.filter((item)=>{\n            return item.id !== iFile.id;\n        });\n        this.filesUpdated.emit(true);\n    }\n\n    public clearStore():void {\n        this.iFiles.forEach((iFile)=> {\n            this.WSfiles.delete(iFile.File);\n        });\n        this.iFiles = [];\n        this.filesUpdated.emit(true);\n    }\n}","import {Injectable, EventEmitter, Output, Input, NgZone} from \"@angular/core\";\n\n@Injectable()\nexport class FileUpload {\n    private zone = new NgZone({enableLongStackTrace: false});\n    public url = null;\n    public beforeRequest = null;\n    public beforeFileUpload = null;\n    public fileUploadedEvent = new EventEmitter(true);\n\n    uploadFiles(iFiles){\n        return Promise.all(iFiles.reduce((res, iFile) => {\n            return res.push(this.uploadFile(iFile)), res;\n        }, []))\n    }\n\n    uploadFile(iFile) {\n        if (!this.url) {\n            throw \"url to upload needs to be provided\";\n        }\n        if (iFile.loading) {\n            throw \"Already under loading\";\n        }\n        let that = this,\n            formData = new FormData();\n\n\n        const xhr = new XMLHttpRequest();\n\n        xhr.upload.onprogress = (event) => {\n            let progress = (event.loaded * 100) / event.total | 0;\n            this.zone.run(()=> {\n                iFile.percentage = progress;\n            })\n        };\n\n        const pr = new Promise((resolve, reject)=> {\n            xhr.onload = xhr.onerror = function (e) {\n                that.zone.run(()=> {\n                    if (this[\"status\"] == 200) {\n                        iFile.loading = false;\n                        iFile.loadingSuccessful = true;\n                        resolve(true);\n                    } else {\n                        iFile.loading = false;\n                        iFile.loadingSuccessful = false;\n                        reject(false);\n                    }\n                })\n            };\n        }).then((success)=>{\n            this.fileUploadedEvent.emit([success, xhr.response, iFile]);\n        }, (reason)=>{\n            this.fileUploadedEvent.emit([reason, xhr.response, iFile]);\n        });\n\n        iFile.loading = true;\n\n        xhr.open(\"POST\", this.url, true);\n\n        //Hook before request to provide user ability to add headers or something else in XHR\n        typeof this.beforeRequest === \"function\" && this.beforeRequest(xhr);\n\n        formData.append(`${iFile.File.name}`, iFile.File);\n\n        if(typeof this.beforeFileUpload === \"function\"){\n            Promise.resolve(this.beforeFileUpload(formData)).then((formData)=> {\n                formData && xhr.send(formData);\n                formData || console.warn(`beforeFileUpload didn't return formData for ${iFile.File.name} and upload was aborted`);\n            });\n        } else {\n            xhr.send(formData);\n        }\n\n        return pr;\n    }\n\n\n}     \n","import {Component, Input, EventEmitter, Output, ViewEncapsulation} from '@angular/core';\nimport {FileDropZone} from './FileDropZone';\nimport {FileList} from './FileList';\nimport {FilesStore} from \"../Services/FileStore.service\";\nimport {File} from \"./File\";\nimport {FileUpload} from \"../Services/FileUpload.service\";\n\n@Component({\n    selector: 'fileDroppa',\n    providers:[FilesStore, FileUpload],\n    encapsulation: ViewEncapsulation.None,\n    styles:[`\n        .file-droppa-container {\n            width: 400px;\n        }\n        .file-droppa-btns {\n         display: flex;\n          align-items: center;\n          justify-content: center;\n\n        }\n        .file-droppa-btn {\n              margin: 15px;\n              padding: 0;\n\n              overflow: hidden;\n\n              border-width: 0;\n              outline: none;\n              border-radius: 2px;\n              box-shadow: 0 1px 4px rgba(0, 0, 0, .6);\n\n              background-color: #2ecc71;\n              color: #ecf0f1;\n\n              transition: background-color .3s;\n              width: 140px;\n              text-align: center;\n              font-size: 12px;\n\n        }\n\n        .file-droppa-btn:hover{\n          background-color: #27ae60;\n        }\n\n        .file-droppa-btn span {\n          display: block;\n          padding: 12px 24px;\n        }\n\n        .file-droppa-btn.orange {\n          background-color: #e67e22;\n        }\n\n        .file-droppa-btn.orange:hover {\n          background-color: #d35400;\n        }\n\n        .file-droppa-btn.red {\n          background-color: #e74c3c;\n        }\n\n        .file-droppa-btn.red:hover{\n          background-color: #c0392b;\n        }\n        `\n    ],\n    template: `\n        <div class=\"file-droppa-container\">\n            <fileDropZone [multiple]=\"multiple\">\n                <div [innerHTML]=\"dropZoneTemplate\"></div>\n            </fileDropZone>\n            <br/>\n            <ng-content></ng-content>\n            <fileList *ngIf=\"showFilesList\"></fileList>\n            <div class=\"file-droppa-btns\" *ngIf=\"filesStore.iFiles.length\">\n              <div #uploadButtonArea (click)=\"uploadAllFiles()\">\n                <ng-content select=\"[upload-button]\"></ng-content>\n              </div>\n              <div *ngIf=\"uploadButtonArea.children.length === 0\" (click)=\"uploadAllFiles();\"\n                   [innerHTML]=\"uploadButtonTemplate\"></div>\n              <div #removeButtonArea (click)=\"removeAllFiles();\">\n                <ng-content select=\"[remove-button]\"></ng-content>\n              </div>\n              <div *ngIf=\"removeButtonArea.children.length === 0\" (click)=\"removeAllFiles();\"\n                   [innerHTML]=\"removeButtonTemplate\"></div>\n            </div>\n        </div>\n    `\n})\nexport class FileDroppa {\n    @Input() showFilesList:boolean = true;\n    @Input() autoUpload:boolean = false;\n    @Input() beforeRequest:Function = null;\n    @Input() set url(tmpUrl: string) {\n      this.fileUploadService.url = tmpUrl;\n    }\n    @Input() beforeFileUpload:Function = null;\n    @Input() beforeAddFile:Function = null;\n    @Input() dropZoneTemplate:string = `\n      <div class=\"file_dropZone_internal\">\n          Drop Files Here\n      </div>\n    `;\n    @Output() filesUpdated = new EventEmitter(true);\n    @Output() fileUploaded = new EventEmitter(true);\n    @Input() uploadButtonTemplate:string = `\n      <div class=\"file-droppa-btn orange\">\n        <span>Upload All Files</span>\n       </div>\n    `;\n    @Input() removeButtonTemplate:string = `\n      <div class=\"file-droppa-btn red\">\n        <span>Remove All Files</span>\n       </div>\n    `;\n    @Input() multiple:boolean = true;\n\n    constructor(public filesStore:FilesStore, private fileUploadService: FileUpload){\n        filesStore.filesUpdated.subscribe(()=>{\n            this.filesUpdated.emit(filesStore.files);\n        });\n        fileUploadService.fileUploadedEvent.subscribe(([success, response, iFile])=>{\n            if(success){\n                this.filesStore.removeFiles(iFile);\n            } else {\n                iFile.loadingSuccessful = false;\n                iFile.responseText = false;\n            }\n            this.fileUploaded.emit([success, response, iFile.file]);\n        });\n        filesStore.startAutoUploading = this.startAutoUploading.bind(this);\n    }\n\n    private startAutoUploading(iFile){\n        this.autoUpload && this.fileUploadService.uploadFile(iFile);\n    }\n\n    /**\n     * We got to pass Input parameters to Service instances\n     */\n    ngOnInit(){\n        this.filesStore.beforeAddFile = (typeof this.beforeAddFile===\"function\") ? this.beforeAddFile : (file) => true;\n        this.fileUploadService.beforeRequest = this.beforeRequest;\n        this.fileUploadService.beforeFileUpload = (typeof this.beforeFileUpload===\"function\") ? this.beforeFileUpload : (formData) => true;\n    }\n\n    removeAllFiles() {\n        this.filesStore.clearStore();\n    }\n\n    uploadAllFiles() {\n        this.fileUploadService.uploadFiles(this.filesStore.iFiles);\n    }\n}\n","import {\n    Component, Input, Output, EventEmitter\n} from '@angular/core';\nimport {NgStyle} from '@angular/common';\nimport {GetSizePipe} from '../Pipes/GetSize.pipe';\n\n@Component({\n    selector: 'fileItem',\n    styles: [`\n        .file-container {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            width: 75px;\n            margin: 20px 10px 0 0;\n            transition: opacity 0.5s, margin 0.5s linear;\n            flex-direction: column;\n            position:relative;\n        }\n\n        .file-container.uploaded {\n            opacity: 0;\n            margin: 0;\n            height: 0;\n            overflow: hidden;\n        }\n\n        .flex-block {\n            width: 90%;\n            text-align: center;\n            font-size: 0.8em;\n            margin: 2px 0;\n        }\n\n        .file-remove {\n            cursor: pointer;\n            position: absolute;\n            left: 87%;\n            top: 8px;\n        }\n        .file-upload-error {\n            position: absolute;\n            top: 8px;\n            left:-8px;\n        }\n        .file-name {\n            text-overflow: ellipsis;\n            overflow: hidden;\n        }\n\n        .file-preview {\n            background: #ccc;\n            border-radius: 2px;\n            width: inherit;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            background-size: cover;\n            color: #fff;\n        }\n\n         .file-preview-ext {\n            text-transform: uppercase;\n        }\n\n        .file-progress {\n            width: 80%;\n            display: block;\n        }\n\n\n        button {\n            margin: 0;\n        }\n\nspan {\n    position:relative;\n    z-index:1;\n    overflow:hidden;\n    list-style:none;\n    padding:0;\n    margin:0 0 0.25em;\n}\n\nspan a:link {\n    display:block;\n    border:0;\n    padding-left:28px;\n    color:#c55500;\n}\n\nspan a:hover,\nspan a:focus {\n    color:#730800;\n    background:transparent;\n}\n\nspan:before,\nspan:after,\nspan a:before,\nspan a:after {\n    content:\"\";\n    position:absolute;\n    top:50%;\n    left:0;\n}\n\nspan a:before,\nspan a:after {\n    margin:-8px 0 0;\n    background:#c55500;\n}\n\nspan a:hover:before,\nspan a:focus:before {\n    background:#730800;\n}\n\n\n.remove a:before {\n    width:16px;\n    height:16px;\n    /* css3 */\n    -webkit-border-radius:16px;\n    -moz-border-radius:16px;\n    border-radius:16px;\n}\n\n.remove a:after {\n    left:3px;\n    width:10px;\n    height:2px;\n    margin-top:-1px;\n    background:#fff;\n}\n.warning:before {\n    content:\"!\";\n    z-index:2;\n    left:8px;\n    margin-top:-8px;\n    font-size:14px;\n    font-weight:bold;\n    color:#000;\n}\n\n.warning:after {\n    z-index:1;\n    border-width:0 11px 18px;\n    border-style:solid;\n    border-color:#F8D201 transparent;\n    margin-top:-10px;\n    background:transparent;\n}\n\n.file-upload-error .tooltiptext {\n    visibility: hidden;\n    white-space:nowrap;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    padding: 5px;\n    border-radius: 6px;\n\n    /* Position the tooltip text - see examples below! */\n    position: absolute;\n    z-index: 1;\n}\n\n.file-upload-error:hover .tooltiptext {\n    visibility: visible;\n}\n\n    `],\n    template: `\n        <div *ngIf=\"file\" class=\"file-container\">\n            <div class=\"flex-block file-preview\" [ngStyle]=\"{'background-image': 'url(' + previewSrc + ')', 'height': previewHeight + 'px'}\">\n                <div *ngIf=\"ext\" class=\"flex-block file-preview-ext \">{{ext}}</div>\n                <div *ngIf=\"!previewSrc\" class=\"flex-block file-name\">{{fileName}}</div>\n                <progress [value]=\"percentage\" max=\"100\" class=\"file-progress\"></progress>\n            </div>\n            <div class=\"file-remove\">\n                <span class=\"remove\"><a href=\"#\" (click)=\"removeFileListener($event)\"></a></span>\n            </div>\n            <div *ngIf=\"!loadingSuccessful\" class=\"file-upload-error\">\n                <span class=\"warning\"></span>\n                <span *ngIf=\"responseMessage\" class=\"tooltiptext\">{{responseMessage}}</span>\n            </div>\n            <div class=\"flex-block\">{{file.size | getSize }}</div>\n        </div>\n    `\n})\n\nexport class File {\n    public ext:string = '';\n    public previewSrc:string = '';\n    public fileName:string = '';\n    //TODO: workaround - depends on strict values;\n    public previewHeight:number = 75;\n\n\n    //ngHooks\n    ngAfterContentInit() {\n        this.file && this.getFileType();\n    }\n\n    @Input() file;\n    @Input() index;\n    @Input() percentage;\n    @Input() loadingSuccessful;\n    @Input() responseMessage;\n\n    @Output() removeFile = new EventEmitter(true);\n\n\n    removeFileListener(e) {\n        e.preventDefault();\n        this.removeFile && this.removeFile.emit(true);\n    }\n\n    getFileType() {\n        let imageType = /^image\\//,\n            reader;\n\n        if (!imageType.test(this.file.type)) {\n            let ext = this.file.name.split('.').pop();\n\n            this.fileName = this.file.name;\n            this.ext = ext.length > 3\n                ? 'file'\n                : `.${ext}`;\n            return;\n        }\n\n        reader = new FileReader();\n\n        reader.addEventListener(\"load\", () => {\n            let img = new Image,\n                result = reader.result;\n\n            img.onload = () => {\n                let ratio = img.height / img.width,\n                    scaledHeight = ratio * this.previewHeight;\n\n                this.previewSrc = result;\n                this.previewHeight = (scaledHeight < this.previewHeight)\n                    ? this.previewHeight\n                    : scaledHeight;\n            };\n\n            img.src = result;\n        }, false);\n\n        if (this.file) {\n            reader.readAsDataURL(this.file);\n        }\n    }\n}\n","import {Injectable} from \"@angular/core\";\n@Injectable()\nexport class FileParser {\n    processFilesFromInput(items) {\n        let newFiles = Object.keys(items).reduce((result, key)=> {\n            let entry,\n                item = items[key];\n\n            if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n                if (entry.isFile) {\n                    result.push(Promise.resolve(item.getAsFile()));\n                } else if (entry.isDirectory) {\n                    result.push(this.processDirectory(entry));\n                }\n            } else if (item.getAsFile != null) {\n                if ((item.kind == null) || item.kind === \"file\") {\n                    result.push(Promise.resolve(item.getAsFile()));\n                }\n            } else if (item.isFile) {\n                let pr = new Promise((resolve, reject)=> {\n                    item.file(resolve, reject);\n                });\n                result.push(pr);\n            } else if (item.isDirectory) {\n                result.push(this.processDirectory(item));\n            }\n            return result;\n        }, []);\n\n        return Promise.all(newFiles).then(this.flattenArrayOfFiles)\n    }\n\n    processDirectory(directory) {\n        let dirReader = directory.createReader(),\n            result = [];\n\n        var readEntries = () => {\n            return new Promise((resolve, reject)=> {\n                dirReader.readEntries((entries) => {\n                    let pr = [];\n\n                    if (entries.length) {\n                        for (var i = 0; i < entries.length; i++) {\n                            pr.push(this.processFilesFromInput({0: entries[i]}));\n                        }\n                    } else {\n                        resolve(null);\n                    }\n                    result.push(readEntries());\n                    Promise.all(pr).then(this.flattenArrayOfFiles).then(resolve);\n                }, (error)=> {\n                    reject(\"Error while reading folder\");\n                });\n            })\n        };\n\n        result.push(readEntries());\n        return Promise.all(result).then(this.flattenArrayOfFiles);\n    }\n\n    processInputFromDrop(e) {\n        let items = e.dataTransfer.items;\n\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n            return Promise.resolve(this.processFilesFromInput(items));\n        } else if (items && items.length && !items[0].webkitGetAsEntry) {\n            return Promise.resolve(items)\n        } else if(e.dataTransfer.files){\n            let files = [];\n            for(let i = 0, l = e.dataTransfer.files.length;i<l;i++){\n                files.push(e.dataTransfer.files[i]);\n            }\n            return Promise.resolve(files);\n        }\n    }\n\n    flattenArrayOfFiles(arrayOfPromises) {\n        return Promise.resolve(arrayOfPromises.reduce((result, file) => {\n            if (file) {\n                return [...result, ...file];\n            }\n        }, []));\n    }\n}\n","import {Component, ElementRef, Input, EventEmitter, Output, ViewEncapsulation} from '@angular/core';\nimport {FileParser} from \"../Services/FileParser.service\";\nimport {FilesStore} from \"../Services/FileStore.service\";\n\n@Component({\n    selector: 'fileDropZone, [fileDropZone]',\n    providers: [FileParser],\n    styles: [`\n        .file_dropZone_internal {\n            border: 3px dashed #DDD;\n            border-radius:10px;\n            padding:10px;\n            width:400px;\n            height:200px;\n            color:#CCC;\n            text-align:center;\n            display:table-cell;\n            vertical-align:middle;\n            cursor:pointer;\n        }\n    `],\n    template: `\n        <ng-content></ng-content>\n    `,\n    host: {\n        '(drop)': 'drop($event)',\n        '(dragenter)': 'dragenter($event)',\n        '(dragover)': 'dragover($event)',\n        '(dragleave)': 'dragleave($event)',\n        '(click)': 'onClick($event)'\n    },\n    encapsulation: ViewEncapsulation.None\n})\nexport class FileDropZone {\n    private hiddenFileInput = null;\n    public promise = null;\n\n    constructor(private filesStore: FilesStore, private el:ElementRef, private fileParser:FileParser) {\n        this.createHiddenInput();\n    }\n\n    @Input()\n    set multiple(value: boolean) {\n      const attributeName = 'multiple';\n      if (value) {\n        this.hiddenFileInput.setAttribute(attributeName, attributeName);\n      } else {\n        this.hiddenFileInput.removeAttribute(attributeName)\n      }\n    }\n\n    /*\n     * Host Event Listeners\n     * */\n\n    onClick(e) {\n        this.hiddenFileInput && this.hiddenFileInput.click();\n    }\n\n    drop(e) {\n        e.preventDefault();\n        if (!e.dataTransfer || !e.dataTransfer.files.length) {\n            return;\n        }\n        this.promise = this.fileParser.processInputFromDrop(e)\n            .then((files)=> {\n                this.updateFilesStore([...files]);\n            });\n        this.updateStyles();\n    }\n\n    dragenter(e) {\n        e.preventDefault()\n    }\n\n    dragover(e) {\n        e.preventDefault();\n        this.updateStyles(true);\n    }\n\n    dragleave(e) {\n        e.preventDefault();\n        this.updateStyles();\n    }\n\n    /*\n     * Public methods\n     * */\n\n    OnDestroy() {\n        this.hiddenFileInput && document.body.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n    }\n\n    updateStyles(dragOver:boolean = false) {\n        //this.el.nativeElement.classList[(dragOver) ? 'add' : 'remove'](this._overCls);\n    }\n\n    updateFilesStore(files:Array<File>):void {\n        this.filesStore.addFiles(files);\n    }\n\n    createHiddenInput() {\n        this.hiddenFileInput && document.body.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = document.createElement(\"input\");\n        this.hiddenFileInput.setAttribute(\"type\", \"file\");\n        this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n        this.hiddenFileInput.style.visibility = \"hidden\";\n        this.hiddenFileInput.style.position = \"absolute\";\n        this.hiddenFileInput.style.top = \"0\";\n        this.hiddenFileInput.style.left = \"0\";\n        this.hiddenFileInput.style.height = \"0\";\n        this.hiddenFileInput.style.width = \"0\";\n        this.hiddenFileInput.className = \"_hiddenInputClassName\";\n        document.body.appendChild(this.hiddenFileInput);\n        this.hiddenFileInput.addEventListener(\"change\", (e)=> {\n            let files = [];\n            for(let i = 0, l = e.target.files.length;i<l;i++){\n                files.push(e.target.files[i]);\n            }\n            this.hiddenFileInput.value = \"\";\n            this.updateFilesStore(files);\n        });\n    }\n\n}\n","import {Component, Input, EventEmitter, Output, ChangeDetectionStrategy} from '@angular/core';\nimport {File} from './File';\nimport {FilesStore} from \"../Services/FileStore.service\";\nimport {FileUpload} from \"../Services/FileUpload.service\";\nimport {iFile} from \"../Services/FileWrapper.service\";\n\n@Component({\n    selector: 'fileList, [fileList]',\n    styles: [`\n        .file-list {\n            width: 430px;\n            margin-bottom: 5px;\n            display: flex;\n            flex-flow: wrap;\n            justify-content: flex-start;\n         }\n    `],\n    template: `\n        <div class=\"file-list\">\n            <fileItem *ngFor=\"let file of filesStore.iFiles\"\n                [file]=\"file.File\"\n                [percentage]=\"file.percentage\"\n                [loadingSuccessful]=\"file.loadingSuccessful\"\n                [responseMessage]=\"file.responseMessage\"\n                (removeFile)=\"removeFile(file)\">\n            </fileItem>\n        </div>\n    `\n})\n\nexport class FileList {\n    constructor(public filesStore:FilesStore){\n    }\n\n    removeFile(iFile:iFile) {\n        this.filesStore.removeFiles(iFile);\n    }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n/*\n * Converts bytes to MB, GB and so on \n * Takes an bytes value argument that defaults to 0.\n * Usage:\n *   value | getSize\n * Example:\n *   {{ 1024 |  getSize}}\n *   formats to: 1 MB\n */\n@Pipe({name: 'getSize'})\nexport class GetSizePipe implements PipeTransform {\n    transform(value:number):string {\n        let bytes = value || 0,\n            sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n            k = 1000,\n            i = Math.floor(Math.log(bytes) / Math.log(k));\n\n        if (bytes === 0) {\n            return '0 Byte';\n        }\n\n        return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n    }\n}","import { CommonModule } from '@angular/common';\nimport {NgModule} from \"@angular/core\";\nimport { FileDroppa as FileDroppaComponent } from \"./Directives/FileDroppa\";\nimport {File} from \"./Directives/File\";\nimport {FileDropZone} from \"./Directives/FileDropZone\";\nimport {FileList} from \"./Directives/FileList\";\nimport {GetSizePipe} from \"./Pipes/GetSize.pipe\";\n\n@NgModule({\n    imports: [\n      CommonModule,\n    ],\n    declarations: [\n      GetSizePipe,\n      FileDroppaComponent,\n      File,\n      FileDropZone,\n      FileList\n    ],\n    exports: [\n      FileDroppaComponent,\n      File,\n      FileDropZone,\n      FileList\n    ],\n})\nexport class NgxFileDroppaModule {\n\n}\n"]}